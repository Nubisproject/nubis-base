# Generated by confd {{datetime}}
---
# Global admins
{{ range $users := ls (print "/global-admins/" $serial.Value)  }}{{ $uid := get (print "/global-admins/" $serial.Value "/" $users "/uid") }}
- user: {{ $users }}
  uid: {{ $uid.Value }}
  groups:
    - wheel
    - users
  keys:{{ range $keys := getvs (print "/global-admins/" $serial.Value "/" $users "/sshPublicKey_*") }}
    - {{ $keys }}{{ end }}
{{ end }}

# sudo users
{{ range $users := ls (print "/sudo-users/" $serial.Value)  }}{{ $uid := get (print "/sudo-users/" $serial.Value "/" $users "/uid") }}
- user: {{ $users }}
  uid: {{ $uid.Value }}
  groups:
    - wheel
    - users
  keys:{{ range $keys := getvs (print "/sudo-users/" $serial.Value "/" $users "/sshPublicKey_*") }}
    - {{ $keys }}{{ end }}
{{ end }}

# users
{{ range $users := ls (print "/users/" $serial.Value)  }}{{ $uid := get (print "/users/" $serial.Value "/" $users "/uid") }}
- user: {{ $users }}
  uid: {{ $uid.Value }}
  groups:
    - users
  keys:{{ range $keys := getvs (print "/users/" $serial.Value "/" $users "/sshPublicKey_*") }}
    - {{ $keys }}{{ end }}
{{ end }}
