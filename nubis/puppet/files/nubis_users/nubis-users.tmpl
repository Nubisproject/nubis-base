# Generated by confd
---
nubis_users::user:
  # global-admins{{ range $dir := lsdir "/global-admins" }}{{ if exists (print "/global-admins/" $dir "/sshPublicKey") }}
  {{ getv (print "/global-admins/" $dir "/uid") }}:
    groups:
      - wheel
      - users
    ssh_keys: |{{ $pubkey := getv (print "/global-admins/" $dir "/sshPublicKey") }}
      {{ replace $pubkey "\n" "\n      " -1 }}
{{ end }}{{ end }}
  # sudo-users{{ range $dir := lsdir "/sudo-users" }}{{ if exists (print "/sudo-users/" $dir "/sshPublicKey") }}
  {{ getv (print "/sudo-users/" $dir "/uid") }}:
    groups:
      - wheel
      - users
    ssh_keys: |{{ $pubkey := getv (print "/sudo-users/" $dir "/sshPublicKey") }}
      {{ replace $pubkey "\n" "\n      " -1 }}
{{ end }}{{ end }}
  # users{{ range $dir := lsdir "/users" }}{{ if exists (print "/users/" $dir "/sshPublicKey") }}
  {{ getv (print "/users/" $dir "/uid") }}:
    groups:
      - users
    ssh_keys: |{{ $pubkey := getv (print "/users/" $dir "/sshPublicKey") }}
      {{ replace $pubkey "\n" "\n      " -1 }}
{{ end }}{{ end }}
# vim:ft=yaml:
